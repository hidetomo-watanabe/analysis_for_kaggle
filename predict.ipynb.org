{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "config_path = './scripts/config.json'\n",
    "config_text = \"\"\"\n",
    "{\n",
    "    \"data\": {\n",
    "        \"train_path\": \"../input/titanic/train.csv\",\n",
    "        \"test_path\": \"../input/titanic/test.csv\",\n",
    "        \"pred_col\": \"Survived\",\n",
    "        \"id_col\": \"PassengerId\",\n",
    "        \"random\": false,\n",
    "        \"adversarial\": {\n",
    "            \"model\": \"log_reg\",\n",
    "            \"scoring\": \"accuracy\",\n",
    "            \"cv\": 3,\n",
    "            \"n_jobs\": -1,\n",
    "            \"params\" : {\n",
    "                \"penalty\": [\"l1\", \"l2\"],\n",
    "                \"C\": [1, 2, 3, 4, 5]\n",
    "            }\n",
    "        }\n",
    "    },\n",
    "    \"fit\": {\n",
    "        \"mode\": \"clf\",\n",
    "        \"models\": [\n",
    "            \"gbdt_clf\"\n",
    "        ],\n",
    "        \"scoring\": \"accuracy\",\n",
    "        \"cv\": 3,\n",
    "        \"n_jobs\": -1,\n",
    "        \"params\" : [\n",
    "            {\n",
    "                \"n_estimators\": [1, 2, 3, 4, 5],\n",
    "                \"max_depth\": [1, 2, 3, 4, 5]\n",
    "            }\n",
    "        ]\n",
    "    },\n",
    "    \"translate\": {\n",
    "        \"adhoc\": {\n",
    "            \"myfunc\": \"titanic\",\n",
    "            \"methods\": [\n",
    "                \"translate_age\",\n",
    "                \"translate_familystatus\"\n",
    "            ]\n",
    "        },\n",
    "        \"del\": [\n",
    "            \"Name\",\n",
    "            \"Ticket\",\n",
    "            \"Fare\",\n",
    "            \"Cabin\",\n",
    "            \"Embarked\"\n",
    "        ],\n",
    "        \"category\": [\n",
    "            \"Pclass\",\n",
    "            \"FamilyStatus\"\n",
    "        ],\n",
    "        \"dimension\": false,\n",
    "        \"fit\": false\n",
    "    },\n",
    "    \"notify\": {\n",
    "        \"slack\": \"https://hooks.slack.com/services/hogehoge\"\n",
    "    }\n",
    "}\n",
    "\"\"\""
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "import sys\n",
    "sys.path.append('./modules')\n",
    "from Predicter import Predicter\n",
    "%matplotlib inline\n",
    "%reload_ext autoreload\n",
    "%autoreload 2"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "predicter_obj = Predicter()\n",
    "# predicter_obj.read_config_file(config_path)\n",
    "predicter_obj.read_config_text(config_text)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('### INIT')\n",
    "predicter_obj.get_raw_data()\n",
    "predicter_obj.display_data()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('### TRANSLATE')\n",
    "predicter_obj.trans_raw_data()\n",
    "predicter_obj.display_data()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('### VISUALIZE TRAIN DATA')\n",
    "predicter_obj.visualize_train_data()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('### NORMALIZE')\n",
    "predicter_obj.get_fitting_data()\n",
    "predicter_obj.normalize_fitting_data()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('### VALIDATE')\n",
    "predicter_obj.is_ok_with_adversarial_validation()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('### FIT')\n",
    "predicter_obj.calc_best_model('tmp.pickle')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('### VISUALIZE TRAIN PRED DATA')\n",
    "predicter_obj.visualize_train_pred_data()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": [
    "print('### OUTPUT')\n",
    "predicter_obj.calc_output()\n",
    "predicter_obj.write_output('tmp.csv')"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.5.3"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 1
}
